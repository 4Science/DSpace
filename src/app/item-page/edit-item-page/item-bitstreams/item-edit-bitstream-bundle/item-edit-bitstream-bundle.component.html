<ng-template #bundleView>

  <ds-pagination *ngIf="(bitstreamsRD$ | async)?.payload as bitstreamsList"
                 [hideGear]="true"
                 [hidePagerWhenSinglePage]="true"
                 [hidePaginationDetail]="true"
                 [paginationOptions]="paginationOptions"
                 [collectionSize]="bitstreamsList.totalElements">
    <ng-container *ngIf="(updates$ | async) as updates">

      <table class="table"
             [attr.aria-label]="'item.edit.bitstreams.bundle.table.aria-label' | translate: { bundle: bundleName } ">
        <thead *ngIf="!hideHeader">
        <tr class="header-row font-weight-bold">
          <th id="name" scope="col" class="{{ columnSizes.columns[0].buildClasses() }}">
            {{'item.edit.bitstreams.headers.name' | translate}}
          </th>
          <th id="description" scope="col" class="{{ columnSizes.columns[1].buildClasses() }}">
            {{'item.edit.bitstreams.headers.description' | translate}}
          </th>
          <th id="format" scope="col" class="{{ columnSizes.columns[2].buildClasses() }}">
            {{'item.edit.bitstreams.headers.format' | translate}}
          </th>
          <th id="actions" scope="col" class="{{ columnSizes.columns[3].buildClasses() }} text-center">
            {{'item.edit.bitstreams.headers.actions' | translate}}
          </th>
        </tr>
        </thead>

        <tbody>
        <tr class="bundle-row">
          <th id="{{ bundleName }}" class="span" colspan="3" scope="colgroup">
            {{'item.edit.bitstreams.bundle.name' | translate:{ name: bundleName } }}
          </th>
          <td class="text-center">
            <button [routerLink]="[itemPageRoute, 'bitstreams', 'new']"
                    [queryParams]="{bundle: bundle.id}"
                    class="btn btn-outline-success btn-sm"
                    title="{{'item.edit.bitstreams.bundle.edit.buttons.upload' | translate}}">
              <i class="fas fa-upload fa-fw"></i>
            </button>
          </td>
        </tr>

        <ng-container *ngFor="let entry of (tableEntries$ | async)">
          <tr *ngIf="updates[entry.id] as update" [ngClass]="getRowClass(update)" class="bitstream-row">

            <th class="bitstream-name row-element {{ columnSizes.columns[0].buildClasses() }}"
                scope="row" id="{{ entry.nameStripped }}" headers="{{ bundleName }} name">
              {{ entry.name }}
            </th>
            <td class="row-element {{ columnSizes.columns[1].buildClasses() }}"
                headers="{{ entry.nameStripped }} {{ bundleName }} description">
              {{ entry.description }}
            </td>
            <td class="row-element {{ columnSizes.columns[2].buildClasses() }}"
                headers="{{ entry.nameStripped }} {{ bundleName }} format">
              {{ (entry.format | async)?.shortDescription }}
            </td>
            <td class="row-element {{ columnSizes.columns[3].buildClasses() }}"
                headers="{{ entry.nameStripped }} {{ bundleName }} actions">
              <div class="text-center w-100">
                <div class="btn-group relationship-action-buttons">
                  <a [href]="entry.downloadUrl"
                     class="btn btn-outline-primary btn-sm"
                     title="{{'item.edit.bitstreams.edit.buttons.download' | translate}}"
                     [attr.data-test]="'download-button' | dsBrowserOnly">
                    <i class="fas fa-download fa-fw"></i>
                  </a>
                  <button [routerLink]="['/bitstreams/', entry.id, 'edit']" class="btn btn-outline-primary btn-sm"
                          title="{{'item.edit.bitstreams.edit.buttons.edit' | translate}}">
                    <i class="fas fa-edit fa-fw"></i>
                  </button>
                  <button [disabled]="!canRemove(update)" (click)="remove(entry.bitstream)"
                          class="btn btn-outline-danger btn-sm"
                          title="{{'item.edit.bitstreams.edit.buttons.remove' | translate}}">
                    <i class="fas fa-trash-alt fa-fw"></i>
                  </button>
                  <button [disabled]="!canUndo(update)" (click)="undo(entry.bitstream)"
                          class="btn btn-outline-warning btn-sm"
                          title="{{'item.edit.bitstreams.edit.buttons.undo' | translate}}">
                    <i class="fas fa-undo-alt fa-fw"></i>
                  </button>
                </div>
              </div>
            </td>
          </tr>
        </ng-container>

        </tbody>
      </table>

    </ng-container>
  </ds-pagination>

</ng-template>
