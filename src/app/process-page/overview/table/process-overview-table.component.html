<div class="container">
  <div class="d-flex dropdown-toggle" (click)="collapse.toggle()" [attr.aria-expanded]="!collapse.collapsed" role="button">
    <h2 class="flex-grow-1">{{'process.overview.table.' + processStatus.toLowerCase() + '.title' | translate}}</h2>
  </div>

  <div ngbCollapse #collapse="ngbCollapse">

    <ng-container *ngVar="(processesRD$ | async) as processesRD">
      <ds-themed-loading *ngIf="!processesRD || processesRD.isLoading"/>

      <ds-pagination *ngIf="processesRD?.payload?.totalElements > 0"
                     [paginationOptions]="(paginationOptions$ | async)"
                     [collectionSize]="processesRD?.payload?.totalElements"
                     [retainScrollPosition]="true">

        <div class="table-responsive mt-1">
          <table class="table table-striped table-hover">
            <thead>
            <tr>
              <th scope="col">{{'process.overview.table.status' | translate}}</th>
              <th scope="col">{{'process.overview.table.name' | translate}}</th>
              <th scope="col">{{'process.overview.table.user' | translate}}</th>
              <th scope="col">{{'process.overview.table.' + processStatus.toLowerCase() + '.info' | translate}}</th>
              <th scope="col">{{'process.overview.table.actions' | translate}}</th>
            </tr>
            </thead>

            <tbody>
            <tr *ngFor="let tableEntry of processesRD?.payload?.page"
                [class.table-danger]="processBulkDeleteService.isToBeDeleted(tableEntry.process.processId)">
              <td>{{tableEntry.process.processStatus}}</td>
              <td><a [routerLink]="['/processes/', tableEntry.process.processId]">{{tableEntry.process.scriptName}}</a></td>
              <td>{{tableEntry.user}}</td>
              <td>{{tableEntry.info}}</td>
              <td>
                <button class="btn btn-outline-danger"
                        (click)="processBulkDeleteService.toggleDelete(tableEntry.process.processId)">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
            </tbody>
          </table>
        </div>

      </ds-pagination>

      <div *ngIf="processesRD?.payload?.totalElements == 0">
        <p>{{'process.overview.table.empty' | translate}}</p>
      </div>
    </ng-container>

  </div>
</div>
