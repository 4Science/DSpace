# A "local.cfg" which is used by our Unit/Integration Testing framework
#
# Any configurations added to this file will automatically OVERRIDE configurations
# of the same name in any of the DSpace *.cfg files.
#
# While some sample configurations are provided below, you may also copy
# ANY configuration from ANY DSpace *.cfg file into this "local.cfg" to OVERRIDE
# its default value. This includes any of these files:
#    * [dspace]/config/dspace.cfg
#    * Or any configuration file that is loaded into 'dspace.cfg'
#     (see "include =" settings near the end of dspace.cfg for full list)
#
# You may also specify additional configuration files to load by simply adding:
# include = [file-path]
# The [file-path] should be relative to the [dspace]/config/ folder, e.g.
# include = modules/authentication-ldap.cfg
#
# Any commented out settings in this file are simply ignored. A configuration
# will only override another configuration if it has the EXACT SAME key/name.
# For example, including "dspace.dir" in this local.cfg will override the
# default value of "dspace.dir" in the dspace.cfg file.
#

##########################
# SERVER CONFIGURATION   #
##########################

# DSpace installation directory.
# This is the location where you want to install DSpace.
# Windows note: Please remember to use forward slashes for all paths (e.g. C:/dspace)
# NOTE: COMMENTED OUT FOR TEST ENVIRONMENT, AS WE DYNAMICALLY SET THIS VIA
# A SYSTEM PROPERTY (-Ddspace.dir) in the maven-surefire-plugin configuration
#dspace.dir=/dspace

##########################
# DATABASE CONFIGURATION #
##########################

# For Unit Testing we use the H2 (in memory) database
db.driver = org.h2.Driver
db.dialect=org.hibernate.dialect.H2Dialect
# Use a 10 second database lock timeout to avoid occasional JDBC lock timeout errors
db.url = jdbc:h2:mem:test;LOCK_TIMEOUT=10000;
db.username = sa
db.password =
# H2's default schema is PUBLIC
db.schema = PUBLIC

#######################
# EMAIL CONFIGURATION #
#######################

# SMTP mail server (allows DSpace to send email notifications)
mail.server = localhost

# An option is added to disable the mailserver. By default, this property is set to false
# By setting mail.server.disabled = true, DSpace will not send out emails.
# It will instead log the subject of the email which should have been sent
# This is especially useful for development and test environments where production data is used when testing functionality.
mail.server.disabled = true

########################
# HANDLE CONFIGURATION #
########################

# CNRI Handle prefix
# (Defaults to a dummy/fake prefix of 123456789)
handle.prefix = 123456789

#####################
# LOGLEVEL SETTINGS #
#####################
loglevel.other = INFO
# loglevel.other: Log level for other third-party tools/APIs used by DSpace
# Possible values (from most to least info): DEBUG, INFO, WARN, ERROR, FATAL
loglevel.dspace = INFO
# loglevel.dspace: Log level for all DSpace-specific code (org.dspace.*)
# Possible values (from most to least info): DEBUG, INFO, WARN, ERROR, FATAL


###########################################
# CUSTOM UNIT / INTEGRATION TEST SETTINGS #
###########################################
# Configure authority control for Unit Testing (in DSpaceControlledVocabularyTest)
# (This overrides default, commented out settings in dspace.cfg)
plugin.selfnamed.org.dspace.content.authority.ChoiceAuthority = \
	org.dspace.content.authority.DCInputAuthority, \
    org.dspace.content.authority.DSpaceControlledVocabulary

# Configure some more Plugins for PluginTest class
# NOTE: Plugins are just *interfaces*. So, here we are defining some plugins
# based on java.util.List interface and giving them names.
# (These are used by PluginTest)
plugin.named.java.util.List = \
    java.util.ArrayList = MyArrayList, \
    java.util.LinkedList = MyLinkedList, \
    java.util.AttributeList = MyAttributeList

# Define a single Map plugin (used by PluginTest)
plugin.single.java.util.Map = java.util.HashMap

# Define a sequence of Collection plugins (used by PluginTest)
plugin.sequence.java.util.Collection = \
    java.util.ArrayList, \
    java.util.LinkedList, \
    java.util.Stack, \
    java.util.TreeSet

# Enable a test authority control on dc.language.iso field
choices.plugin.dc.language.iso = common_iso_languages
choices.presentation.dc.language.iso = select
authority.controlled.dc.language.iso = true

### IIIF VIEWER
plugin.named.org.dspace.app.webui.json.JSONRequest = \
        org.dspace.app.webui.discovery.DiscoveryJSONRequest = discovery,\
        org.dspace.app.webui.json.SubmissionLookupJSONRequest = submissionLookup,\
        org.dspace.app.webui.json.UploadProgressJSON = uploadProgress,\
        org.dspace.app.webui.handle.HandleJSONResolver = hdlresolver,\
        org.dspace.app.webui.json.CreativeCommonsJSONRequest = creativecommons,\
        org.dspace.app.webui.json.IIIFManifestRequest = iiif

iiif.image.server.url =
iiif.image.server.valid-formats = JPEG
iiif.image.server.valid-formats = GIF
iiif.image.server.valid-formats = image/png
iiif.image.server.valid-formats = TIFF
iiif.image.server.storage.base-path = ${dspace.dir}/iiif-image-storage
iiif.image.server.storage.thumbnail-path = ${dspace.dir}/iiif-image-storage-thumbnail
iiif.image.server.storage.preview-path = ${dspace.dir}/iiif-image-storage-preview
iiif.image.server.storage.folder =
iiif.image.server.link-extension.required = false
iiif.image.server.link-filepath.separator = !
iiif.pdf-image.server.url =
iiif.image.server.pdf-valid-formats = Adobe PDF

# Resolution (dpi) of the extracted images
iiif.pdf2image.resolution = 300
iiif.customerID =
iiif.ocr.server.url =
iiif.autocomplete.server.url =
iiif.search.server.url =
iiif.imagemagick-convert-path =

# ImageMagick convert process takes about 1GB of disk space with 10 pages per process, the disk space augment linearly with the 10 pages blocks
iiif.pdf2image.imagemagick-pagerange = 10
iiif.pdf2image.imagemagick-convert-format = png
iiif.raw-valid-formats = Nikon Image RAW, Canon Image RAW
iiif.raw.imagemagick-convert-format = png
iiif.raw.resolution = 300

# Viewer client configuration, choose one between "mirador" and "uv"
iiif.viewer = mirador

# Project Mirador configuration
iiif.viewer.mainmenusettings = false
iiif.viewer.storage = Local Storage
iiif.viewer.storageendpoint = LocalStorageEndpoint
iiif.viewer.viewtype = ImageView
iiif.viewer.displaylayout = false
iiif.viewer.bottompanel = true
iiif.viewer.bottompanelavailable = true
iiif.viewer.bottompanelvisible = false
iiif.viewer.sidepanel = false
iiif.viewer.annotationlayer = true
iiif.viewer.annotationcreation = true
iiif.viewer.annotationstate = "off"
iiif.viewer.annotationrefresh = false
iiif.viewer.manipulationlayer = true
iiif.viewer.rotate = true
iiif.viewer.brightness = true
iiif.viewer.contrast = true
iiif.viewer.saturate = true
iiif.viewer.grayscale = true
iiif.viewer.invert = true
iiif.viewer.mirror = true

plugin.named.org.dspace.curate.CurationTask = org.dspace.ctask.general.NoOpCurationTask = noop
plugin.named.org.dspace.curate.CurationTask = org.dspace.ctask.general.ProfileFormats = profileformats
plugin.named.org.dspace.curate.CurationTask = org.dspace.ctask.general.RequiredMetadata = requiredmetadata
plugin.named.org.dspace.curate.CurationTask = org.dspace.ctask.general.ClamScan = vscan
plugin.named.org.dspace.curate.CurationTask = org.dspace.ctask.general.MicrosoftTranslator = translate
plugin.named.org.dspace.curate.CurationTask = org.dspace.ctask.general.MetadataValueLinkChecker = checklinks
plugin.named.org.dspace.curate.CurationTask = org.dspace.app.iiif.IIIFUploaderCurationTask = iiifuploader
plugin.named.org.dspace.curate.CurationTask = org.dspace.app.iiif.RebuildLinkCurationTask = iiiffixsymlink
plugin.named.org.dspace.curate.CurationTask = org.dspace.app.iiif.IIIFForbidFileDownload = iiifforbidfiledownload

curate.ui.tasknames = profileformats = Profile Bitstream Formats
curate.ui.tasknames = requiredmetadata = Check for Required Metadata
curate.ui.tasknames = checklinks = Check Links in Metadata
curate.ui.tasknames = iiifuploader = Upload images to the IIIF Image Server
curate.ui.tasknames = iiiffixsymlink = Fix missing symlinks for bitstream registered in DigiLib
curate.ui.tasknames = iiifforbidfiledownload = Forbid file download for files uploaded on Image Server