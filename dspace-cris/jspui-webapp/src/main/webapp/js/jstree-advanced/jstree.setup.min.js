var JsTree={maxTextLength:250,load:function(e,t,n,a,r){$(function(){var u;jQuery("#"+a).jstree({core:{data:{url:e,dataType:"json",data:function(e){return{id:e.id}}}},plugins:[]}),jQuery("#"+a).on("changed.jstree",function(e,a){if((u=a.instance.get_selected(!0)).length>0){var i=u[0].id;jQuery.getJSON(t+"/"+i,{profile:n},function(e){var t=jQuery("#"+r),n=jQuery("<table/>",{class:"table table-hover"}),a=jQuery("<tbody/>").appendTo(n);for(var i in e){var l=jQuery("<tr/>").appendTo(a);if(jQuery("<td><strong>"+e[i].label+"</strong></td>").appendTo(l),e[i].value.length>1){var o=jQuery("<td/>"),d=jQuery("<ul/>").appendTo(o);for(var h in e[i].value){var s="";e[i].url&&1==e[i].url?(u[0].children.length<=0&&(window.location.href=e[i].value[h]),s=this.makeLink(e[i].value[h],e[i].value[h])):s=this.truncateAt(e[i].value[h],this.maxTextLength);jQuery("<li>"+s+"</li>").appendTo(d)}o.appendTo(l)}else{s="";e[i].value.length>0&&(e[i].url&&1==e[i].url?(u[0].children.length<=0&&(window.location.href=e[i].value[0]),s=this.makeLink(e[i].value[0],e[i].value[0])):s=this.truncateAt(e[i].value[0],this.maxTextLength),jQuery("<td>"+s+"</td>").appendTo(l))}}t.empty(),n.appendTo(t)}.bind(this))}}.bind(this))}.bind(this))},truncateAt:function(e,t){return e.length>t?e.substr(0,t)+"â€¦":e},makeLink:function(e,t){this.truncateAt(e,this.maxTextLength);return'<a href="'+t+'">'+e+"</a>"}};
