var JsTree={maxTextLength:250,load:function(e,t,n,r,a,i,u,l,d){$(function(){var o;i?jQuery("#"+r).jstree({core:{data:{url:e,data:function(e){return{id:e.id}}}},plugins:[]}):(jQuery("#"+r).jstree({core:{data:{url:e,dataType:"json",data:function(e){return{id:e.id}}}},plugins:[]}),l&&jQuery("#"+r).bind("loaded.jstree",function(e,t){jQuery(this).jstree("open_all")})),i&&jQuery("#"+r).on("changed.jstree",function(t,n){if((o=n.instance.get_selected(!0)).length>0){var r=o[0].id;jQuery.getJSON(e,{id:r},function(e){}.bind(this))}}.bind(this)),u&&jQuery("#"+r).on("changed.jstree",function(e,r){var i=r.instance.get_selected(!0);if(i.length>0){var u=i[0].id;jQuery.getJSON(t+"/"+u,{profile:n},function(e){var t=jQuery("#"+a),n=jQuery("<table/>",{class:"table table-hover"}),r=jQuery("<tbody/>").appendTo(n);for(var u in e){var l=jQuery("<tr/>").appendTo(r);if(jQuery("<td><strong>"+e[u].label+"</strong></td>").appendTo(l),e[u].value.length>1){var o=jQuery("<td/>"),s=jQuery("<ul/>").appendTo(o);for(var h in e[u].value){var c="";e[u].url&&1==e[u].url?(i[0].children.length<=0&&i[0].id!==d&&window.open(e[u].valueUrl[h],"_blank"),c=this.makeLink(e[u].value[h],e[u].valueUrl[h])):c=this.truncateAt(e[u].value[h],this.maxTextLength);jQuery("<li>"+c+"</li>").appendTo(s)}o.appendTo(l)}else{c="";e[u].value.length>0&&(e[u].url&&1==e[u].url?(i[0].children.length<=0&&i[0].id!==d&&window.open(e[u].valueUrl[0],"_blank"),c=this.makeLink(e[u].value[0],e[u].valueUrl[0])):c=this.truncateAt(e[u].value[0],this.maxTextLength),jQuery("<td>"+c+"</td>").appendTo(l))}}t.empty(),n.appendTo(t)}.bind(this))}}.bind(this))}.bind(this))},truncateAt:function(e,t){return e.length>t?e.substr(0,t)+"â€¦":e},makeLink:function(e,t){this.truncateAt(e,this.maxTextLength);return'<a target="_blank" href="'+t+'">'+e+"</a>"}};
