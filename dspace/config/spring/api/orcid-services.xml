<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context.xsd">

    <context:annotation-config /> <!-- allows us to use spring annotations in beans -->
    

    <bean class="org.dspace.app.orcid.service.impl.OrcidQueueServiceImpl" />
    <bean class="org.dspace.app.orcid.service.impl.OrcidHistoryServiceImpl" />
    
    <bean class="org.dspace.authenticate.OrcidAuthenticationBean" id="orcidAuthentication"/>
    
    <bean class="org.dspace.app.orcid.client.OrcidConfiguration">
    	<property name="apiUrl" value="${orcid.api-url}" />
    	<property name="domainUrl" value="${orcid.domain-url}" />
    	<property name="redirectUrl" value="${orcid.redirect-url}" />
    	<property name="clientId" value="${orcid.application-client-id}" />
    	<property name="clientSecret" value="${orcid.application-client-secret}" />
    	<property name="tokenEndpointUrl" value="${orcid.token-url}" />
    	<property name="authorizeEndpointUrl" value="${orcid.authorize-url}" />
    	<property name="scopes" value="${orcid.scope}" />
    </bean>
    
    <bean class="org.dspace.app.orcid.client.OrcidClientImpl" />
    <bean id="metadataSignatureGenerator" class="org.dspace.app.orcid.service.impl.PlainMetadataSignatureGeneratorImpl" />
    
    <bean class="org.dspace.app.orcid.model.factory.impl.OrcidCommonObjectFactoryImpl">
    	<constructor-arg name="organizationCityField" value="${orcid.mapping.organization.city}" />
    	<constructor-arg name="organizationCountryField" value="${orcid.mapping.organization.country}" />
    	<constructor-arg name="disambiguatedOrganizationIdentifierFields" value="${orcid.mapping.organization.identifiers}" />
    	<constructor-arg name="disambiguatedOrganizationSources" value="${orcid.mapping.organization.identifier-sources}" />
    </bean>
    
    <bean class="org.dspace.app.orcid.service.impl.OrcidProfileSectionFactoryServiceImpl">
    	<constructor-arg name="metadataSignatureGenerator" ref="metadataSignatureGenerator" />
    	<constructor-arg name="sectionFactories">
    		<list>
    		
    			<bean class="org.dspace.app.orcid.model.factory.impl.OrcidAffiliationFactory">
					<constructor-arg name="sectionType" value="AFFILIATION" />
					<constructor-arg name="preference" value="AFFILIATION" />
					<constructor-arg name="organizationField" value="${orcid.mapping.affiliation.name}" />
					<constructor-arg name="roleField" value="${orcid.mapping.affiliation.role}" />
					<constructor-arg name="startDateField" value="${orcid.mapping.affiliation.start-date}" />
					<constructor-arg name="endDateField" value="${orcid.mapping.affiliation.end-date}" />
				</bean>
				
    			<bean class="org.dspace.app.orcid.model.factory.impl.OrcidAffiliationFactory">
					<constructor-arg name="sectionType" value="QUALIFICATION" />
					<constructor-arg name="preference" value="EDUCATION" />
					<constructor-arg name="organizationField" value="${orcid.mapping.qualification.name}" />
					<constructor-arg name="roleField" value="${orcid.mapping.qualification.role}" />
					<constructor-arg name="startDateField" value="${orcid.mapping.qualification.start-date}" />
					<constructor-arg name="endDateField" value="${orcid.mapping.qualification.end-date}" />
				</bean>
				
    			<bean class="org.dspace.app.orcid.model.factory.impl.OrcidAffiliationFactory">
					<constructor-arg name="sectionType" value="EDUCATION" />
					<constructor-arg name="preference" value="EDUCATION" />
					<constructor-arg name="organizationField" value="${orcid.mapping.education.name}" />
					<constructor-arg name="roleField" value="${orcid.mapping.education.role}" />
					<constructor-arg name="startDateField" value="${orcid.mapping.education.start-date}" />
					<constructor-arg name="endDateField" value="${orcid.mapping.education.end-date}" />
				</bean>
				
    			<bean class="org.dspace.app.orcid.model.factory.impl.OrcidSimpleValueObjectFactory">
					<constructor-arg name="sectionType" value="OTHER_NAMES" />
					<constructor-arg name="preference" value="BIOGRAPHICAL" />
					<constructor-arg name="metadataFields" value="${orcid.mapping.other-names}" />
				</bean>
				
    			<bean class="org.dspace.app.orcid.model.factory.impl.OrcidSimpleValueObjectFactory">
					<constructor-arg name="sectionType" value="KEYWORDS" />
					<constructor-arg name="preference" value="BIOGRAPHICAL" />
					<constructor-arg name="metadataFields" value="${orcid.mapping.keywords}" />
				</bean>
				
    			<bean class="org.dspace.app.orcid.model.factory.impl.OrcidSimpleValueObjectFactory">
					<constructor-arg name="sectionType" value="COUNTRY" />
					<constructor-arg name="preference" value="BIOGRAPHICAL" />
					<constructor-arg name="metadataFields" value="${orcid.mapping.country}" />
				</bean>
				
    			<bean class="org.dspace.app.orcid.model.factory.impl.OrcidPersonExternalIdentifierFactory">
					<constructor-arg name="sectionType" value="EXTERNAL_IDS" />
					<constructor-arg name="preference" value="IDENTIFIERS" />
					<constructor-arg name="metadataFields" value="${orcid.mapping.external-ids.values}" />
					<constructor-arg name="externalIdType" value="${orcid.mapping.external-ids.types}" />
				</bean>
				
    			<bean class="org.dspace.app.orcid.model.factory.impl.OrcidSimpleValueObjectFactory">
					<constructor-arg name="sectionType" value="RESEARCHER_URLS" />
					<constructor-arg name="preference" value="IDENTIFIERS" />
					<constructor-arg name="metadataFields" value="${orcid.mapping.researcher-urls}" />
				</bean>
				
    		</list>
    	</constructor-arg>
    </bean>
    
</beans>
